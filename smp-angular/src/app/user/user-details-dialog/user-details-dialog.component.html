<h2 md-dialog-title>{{formTitle}}</h2>
<md-dialog-content style="height:260px;width:650px">
  <md-card>
    <md-card-content>
      <div style="margin-top:15px;">
        <md-input-container style="width:100%">
          <input mdInput placeholder="Username" name="userName" id="userName" [value]="current.userName" (blur)="updateUserName($event)" [formControl]="userForm.controls['userName']" maxlength="255" required>
          <div *ngIf="userForm.controls['userName'].hasError('required') && userForm.controls['userName'].touched" style="color:red; font-size: 70%">You should type an username</div>
        </md-input-container>
      </div>

      <div style="margin-top:10px;">
        <md2-select mdInput placeholder="Role" [style.width]="'100%'" [formControl]="userForm.controls['role']"
                    [(ngModel)]="role" required>
          <md2-option *ngFor="let item of existingRoles" [value]="item">{{getRoleLabel(item)}}</md2-option>
        </md2-select>
        <div *ngIf="userForm.controls['role'].hasError('required') && userForm.controls['role'].touched" style="color:red; font-size: 70%">You need to choose at least one role for this user</div>
      </div>

      <div style="margin-top:15px;">
        <md-input-container [style.width]="'100%'">
          <input mdInput placeholder="Password" name="password" type="password" [value]="current.password" (blur)="updatePassword($event)" [formControl]="userForm.controls['password']" [pattern]="passwordPattern" [required]="!editMode">
          <div *ngIf="!editMode && userForm.controls['password'].hasError('required') && userForm.controls['password'].touched" style="color:red; font-size: 70%">You should type a password</div>
          <div *ngIf="userForm.controls['password'].dirty && userForm.controls['password'].hasError('pattern') && userForm.controls['password'].touched" style="color:red; font-size: 70%">
            Password should follow all of these rules:<br>
            - Minimum length: 8 characters<br>
            - Maximum length: 32 characters<br>
            - At least one letter in lowercase<br>
            - At least one letter in uppercase<br>
            - At least one digit<br>
            - At least one special character
          </div>
        </md-input-container>
      </div>

      <div>
        <md-input-container [style.width]="'100%'">
          <input mdInput placeholder="Confirmation" name="confirmation" type="password" [value]="current.confirmation" [formControl]="userForm.controls['confirmation']" [required]="!editMode">
          <div *ngIf="!editMode && userForm.controls['confirmation'].hasError('required') && userForm.controls['confirmation'].touched" style="color:red; font-size: 70%">You should type a password</div>
          <div *ngIf="userForm.errors?.confirmation && userForm.controls['confirmation'].touched" style="color:red; font-size: 70%">Passwords do not match</div>
        </md-input-container>
      </div>

    </md-card-content>
  </md-card>

</md-dialog-content>

<table class="buttonsRow">
  <tr>
    <td>
      <button md-raised-button color="primary" [md-dialog-close]="true" (click)="submitForm()" [disabled]="!userForm.valid">
        <md-icon>check_circle</md-icon>
        <span>OK</span>
      </button>
      <button md-raised-button color="primary" md-dialog-close>
        <md-icon>cancel</md-icon>
        <span>Cancel</span>
      </button>
    </td>
  </tr>
</table>
<div  style="text-align: right; font-size: 70%">* required fields</div>

