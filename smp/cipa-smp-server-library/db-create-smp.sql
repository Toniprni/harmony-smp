CREATE TABLE smp_endpoint (certificate CLOB NOT NULL, extension CLOB NULL, minimumAuthenticationLevel VARCHAR2(256) NULL, requireBusinessLevelSignature NUMBER(1) default 0 NOT NULL, serviceActivationDate TIMESTAMP NULL, serviceDescription CLOB NOT NULL, serviceExpirationDate TIMESTAMP NOT NULL, technicalContactUrl VARCHAR2(256) NOT NULL, technicalInformationUrl VARCHAR2(256) NULL, documentIdentifierScheme VARCHAR2(25) NOT NULL, processIdentifier VARCHAR2(200) NOT NULL, businessIdentifier VARCHAR2(50) NOT NULL, businessIdentifierScheme VARCHAR2(25) NOT NULL, endpointReference VARCHAR2(256) NOT NULL, documentIdentifier VARCHAR2(500) NOT NULL, processIdentifierType VARCHAR2(25) NOT NULL, transportProfile VARCHAR2(256) NOT NULL, PRIMARY KEY (documentIdentifierScheme, processIdentifier, businessIdentifier, businessIdentifierScheme, endpointReference, documentIdentifier, processIdentifierType, transportProfile))
CREATE TABLE smp_ownership (username VARCHAR2(256) NOT NULL, businessIdentifier VARCHAR2(50) NOT NULL, businessIdentifierScheme VARCHAR2(25) NOT NULL, PRIMARY KEY (username, businessIdentifier, businessIdentifierScheme))
CREATE TABLE smp_process (extension CLOB NULL, documentIdentifierScheme VARCHAR2(25) NOT NULL, processIdentifier VARCHAR2(200) NOT NULL, businessIdentifier VARCHAR2(50) NOT NULL, businessIdentifierScheme VARCHAR2(25) NOT NULL, documentIdentifier VARCHAR2(500) NOT NULL, processIdentifierType VARCHAR2(25) NOT NULL, PRIMARY KEY (documentIdentifierScheme, processIdentifier, businessIdentifier, businessIdentifierScheme, documentIdentifier, processIdentifierType))
CREATE TABLE smp_service_group (extension CLOB NULL, businessIdentifier VARCHAR2(50) NOT NULL, businessIdentifierScheme VARCHAR2(25) NOT NULL, PRIMARY KEY (businessIdentifier, businessIdentifierScheme))
CREATE TABLE smp_service_metadata (extension CLOB NULL, xmlcontent CLOB NULL, documentIdentifierScheme VARCHAR2(25) NOT NULL, businessIdentifier VARCHAR2(50) NOT NULL, businessIdentifierScheme VARCHAR2(25) NOT NULL, documentIdentifier VARCHAR2(500) NOT NULL, PRIMARY KEY (documentIdentifierScheme, businessIdentifier, businessIdentifierScheme, documentIdentifier))
CREATE TABLE smp_user (username VARCHAR2(256) NOT NULL UNIQUE, isadmin NUMBER(1) default 0 NOT NULL, password VARCHAR2(256) NULL, PRIMARY KEY (username))
CREATE TABLE smp_service_metadata_red (certificateUID VARCHAR2(256) NOT NULL, extension CLOB NULL, redirectionUrl VARCHAR2(256) NOT NULL, documentIdentifierScheme VARCHAR2(25) NOT NULL, businessIdentifier VARCHAR2(50) NOT NULL, businessIdentifierScheme VARCHAR2(25) NOT NULL, documentIdentifier VARCHAR2(500) NOT NULL, PRIMARY KEY (documentIdentifierScheme, businessIdentifier, businessIdentifierScheme, documentIdentifier))
ALTER TABLE smp_endpoint ADD CONSTRAINT smpndpintdcmntIdentifierScheme FOREIGN KEY (documentIdentifierScheme, processIdentifier, businessIdentifier, businessIdentifierScheme, documentIdentifier, processIdentifierType) REFERENCES smp_process (documentIdentifierScheme, processIdentifier, businessIdentifier, businessIdentifierScheme, documentIdentifier, processIdentifierType)
ALTER TABLE smp_ownership ADD CONSTRAINT smpownershipbusinessIdentifier FOREIGN KEY (businessIdentifier, businessIdentifierScheme) REFERENCES smp_service_group (businessIdentifier, businessIdentifierScheme)
ALTER TABLE smp_ownership ADD CONSTRAINT FK_smp_ownership_username FOREIGN KEY (username) REFERENCES smp_user (username)
ALTER TABLE smp_process ADD CONSTRAINT smpprcessdcmntIdentifierScheme FOREIGN KEY (documentIdentifierScheme, businessIdentifier, businessIdentifierScheme, documentIdentifier) REFERENCES smp_service_metadata (documentIdentifierScheme, businessIdentifier, businessIdentifierScheme, documentIdentifier)
ALTER TABLE smp_service_metadata ADD CONSTRAINT smpsrvcemetadatabsnssdentifier FOREIGN KEY (businessIdentifier, businessIdentifierScheme) REFERENCES smp_service_group (businessIdentifier, businessIdentifierScheme)
